<!DOCTYPE html>
<html dir="rtl">
<head>
<title>Moon MP4 Downloader</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial}
body{
    background:#0f0f0f;
    color:#fff;
    line-height:1.6
}
.container{
    max-width:800px;
    margin:auto;
    padding:20px
}
.header{
    text-align:center;
    padding:30px 0;
    background:linear-gradient(45deg,#1a1a1a,#2a2a2a);
    border-radius:15px;
    margin-bottom:30px
}
.logo{
    font-size:35px;
    color:#00ff88;
    margin-bottom:10px;
    font-weight:bold
}
.input-container{
    margin:20px 0;
    position:relative
}
.url-input{
    width:100%;
    padding:15px;
    background:#222;
    border:2px solid #333;
    color:#fff;
    border-radius:10px;
    font-size:16px;
    transition:0.3s
}
.url-input:focus{
    border-color:#00ff88;
    outline:none
}
.download-btn{
    width:100%;
    padding:15px;
    background:#00ff88;
    color:#000;
    border:none;
    border-radius:10px;
    font-size:16px;
    font-weight:bold;
    cursor:pointer;
    transition:0.3s;
    margin:10px 0
}
.download-btn:hover{
    background:#00cc6a;
    transform:translateY(-2px)
}
.platform-btns{
    display:flex;
    gap:10px;
    margin-bottom:20px
}
.platform-btn{
    flex:1;
    padding:12px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-weight:bold;
    transition:0.3s
}
.youtube{background:#ff0000;color:#fff}
.instagram{background:#e1306c;color:#fff}
#status{
    text-align:center;
    margin:15px 0;
    color:#00ff88
}
</style>
</head>
<body>
<div class="container">
    <div class="header">
        <div class="logo">Moon MP4 Downloader</div>
        <p>تحميل فيديوهات MP4 عالية الجودة</p>
    </div>

    <div class="platform-btns">
        <button class="platform-btn youtube" onclick="setPlatform('youtube')">يوتيوب</button>
        <button class="platform-btn instagram" onclick="setPlatform('instagram')">انستغرام</button>
    </div>

    <div class="input-container">

<input type="text" id="url" class="url-input" placeholder="ضع رابط الفيديو هنا...">
    </div>

    <button onclick="downloadMP4()" class="download-btn">تحميل MP4</button>
    <div id="status"></div>
</div>

<script>
let currentPlatform = 'youtube';
const API_KEY = '2844421e5dmsh6b45d3c42ec7e26p1389dfjsn0cca91431465';

function setPlatform(platform) {
    currentPlatform = platform;
    document.getElementById('url').placeholder = `ضع رابط ${platform === 'youtube' ? 'يوتيوب' : 'انستغرام'} هنا...`;
}

async function downloadMP4() {
    const url = document.getElementById('url').value;
    const status = document.getElementById('status');
    
    if (!url) {
        status.innerHTML = 'الرجاء إدخال رابط صحيح';
        return;
    }

    status.innerHTML = 'جاري تحضير الملف للتحميل...';

    try {
        const options = {
            method: 'GET',
            headers: {
                'X-RapidAPI-Key': API_KEY,
                'X-RapidAPI-Host': currentPlatform === 'youtube' ? 
                    'youtube-mp4-downloader.p.rapidapi.com' : 
                    'instagram-downloader-download-instagram-videos-stories.p.rapidapi.com'
            }
        };

        let apiUrl = currentPlatform === 'youtube' ?
            `https://youtube-mp4-downloader.p.rapidapi.com/download?url=${encodeURIComponent(url)}` :
            `https://instagram-downloader-download-instagram-videos-stories.p.rapidapi.com/index?url=${encodeURIComponent(url)}`;

        const response = await fetch(apiUrl, options);
        const data = await response.json();

        if (data.error) {
            throw new Error(data.error);
        }

        // إنشاء رابط التحميل
        const downloadUrl = currentPlatform === 'youtube' ? data.downloadUrl : data.media;
        
        // إنشاء عنصر a مخفي للتحميل
        const downloadLink = document.createElement('a');
        downloadLink.href = downloadUrl;
        downloadLink.download = `video_${Date.now()}.mp4`;
        document.body.appendChild(downloadLink);
        downloadLink.click();
        document.body.removeChild(downloadLink);

        status.innerHTML = 'جاري التحميل... ✅';
        
        // تنظيف الحالة بعد 3 ثواني
        setTimeout(() => {
            status.innerHTML = '';
        }, 3000);

    } catch (error) {
        status.innerHTML = `حدث خطأ: ${error.message}`;
    }
}

// تفعيل زر Enter للتحميل
document.getElementById('url').addEventListener('keypress', (e) => {
    if (e.key === 'Enter') downloadMP4();
});
</script>
</body>
</html>
