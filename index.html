
<!DOCTYPE html>
<html dir="rtl">
<head>
<title>🌙 Moon Helper</title>
<style>
:root {
  --primary: #5865F2;
  --secondary: #2C2F33;
  --success: #57F287;
  --error: #ED4245;
  --bg: linear-gradient(135deg, #23272A 0%, #2C2F33 100%);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Cairo', system-ui;
}

body {
  background: var(--bg);
  min-height: 100vh;
  color: white;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
}

‎/* صفحة تسجيل الدخول */
.login-page {
  height: 100vh;
  display: grid;
  place-items: center;
  text-align: center;
}

.login-box {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  padding: 2rem;
  border-radius: 20px;
  width: 90%;
  max-width: 400px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.logo {
  font-size: 2.5rem;
  margin-bottom: 1rem;
  color: var(--primary);
}

.login-btn {
  background: var(--primary);
  color: white;
  border: none;
  padding: 1rem 2rem;
  border-radius: 10px;
  font-size: 1.1rem;
  cursor: pointer;
  transition: all 0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  width: 100%;
  margin-top: 1rem;
}

.login-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 5px 15px rgba(88, 101, 242, 0.4);
}

‎/* صفحة الغرف */
.rooms-page {
  display: none;
  padding-top: 2rem;
}

.room-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 2rem;
  margin-top: 2rem;
}

.room-card {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 15px;
  padding: 2rem;
  text-align: center;
  transition: all 0.3s;
}

.room-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}

.room-icon {
  font-size: 3rem;
  margin-bottom: 1rem;
}

.user-info {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 2rem;
  padding: 1rem;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
}

.avatar {
  width: 50px;

height: 50px;
  border-radius: 50%;
  border: 2px solid var(--primary);
}

.status {
  padding: 1rem;
  border-radius: 10px;
  margin-top: 1rem;
  display: none;
}

.status.success { background: rgba(87, 242, 135, 0.1); color: var(--success); }
.status.error { background: rgba(237, 66, 69, 0.1); color: var(--error); }
</style>
</head>
<body>

<!-- صفحة تسجيل الدخول -->
<div id="loginPage" class="login-page">
  <div class="login-box">
    <div class="logo">🌙 Moon Helper</div>
    <p>قم بتسجيل الدخول للوصول إلى الغرف الصوتية</p>
    <button onclick="loginWithDiscord()" class="login-btn">
      <img src="https://assets-global.website-files.com/6257adef93867e50d84d30e2/636e0a6a49cf127bf92de1e2_icon_clyde_white_RGB.png" width="24">
      تسجيل دخول بـ Discord
    </button>
  </div>
</div>

<!-- صفحة الغرف -->
<div id="roomsPage" class="rooms-page">
  <div class="container">
    <div class="user-info">
      <img id="userAvatar" class="avatar" src="" alt="صورة المستخدم">
      <div>
        <h3 id="username">...</h3>
        <button onclick="logout()" class="login-btn" style="background: var(--error)">تسجيل خروج</button>
      </div>
    </div>

    <div class="room-grid">
      <div class="room-card">
        <div class="room-icon">🎯</div>
        <h2>إنشاء غرفة</h2>
        <p>أنشئ غرفة جديدة وشارك مع أصدقائك</p>
        <button class="login-btn" onclick="createRoom()">إنشاء غرفة</button>
      </div>

      <div class="room-card">
        <div class="room-icon">🚀</div>
        <h2>انضمام لغرفة</h2>
        <p>انضم لغرفة موجودة باستخدام الكود</p>
        <button class="login-btn" onclick="joinRoom()">انضمام للغرفة</button>
      </div>
    </div>
  </div>
</div>

<div id="status" class="status"></div>

<script>
const config = {
  CLIENT_ID: '1284253565417816246',
  REDIRECT_URI: 'https://hamza2138.github.io/MoonHelperAi/callback'
};

// التحقق من حالة تسجيل الدخول عند تحميل الصفحة
window.onload = () => {
  const userData = localStorage.getItem('discord_user');

if (userData) {
    showRoomsPage(JSON.parse(userData));
  }
};

// تسجيل الدخول بـ Discord
function loginWithDiscord() {
  const scopes = [
    'identify',
    'connections',
    'voice',
    'applications.commands.permissions.update',
    'sdk.social_layer'
  ].join('%20');

  const authUrl = `https://discord.com/oauth2/authorize?client_id=${config.CLIENT_ID}&response_type=code&redirect_uri=${encodeURIComponent(config.REDIRECT_URI)}&scope=${scopes}`;

  window.location.href = authUrl;
}

// عرض صفحة الغرف بعد تسجيل الدخول
function showRoomsPage(user) {
  document.getElementById('loginPage').style.display = 'none';
  document.getElementById('roomsPage').style.display = 'block';
  
  document.getElementById('userAvatar').src = user.avatar 
    ? `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png`
    : 'https://discord.com/assets/1cbd08c76f8af6dddce02c5138971129.png';
  
  document.getElementById('username').textContent = user.username;
}

// إنشاء غرفة جديدة
function createRoom() {
  const roomId = Math.random().toString(36).substring(2, 9);
  showStatus(`تم إنشاء الغرفة! الكود: ${roomId}`, 'success');
}

// الانضمام لغرفة
function joinRoom() {
  const roomId = prompt('أدخل كود الغرفة:');
  if (roomId) {
    showStatus('جاري الانضمام للغرفة...', 'success');
  }
}

// تسجيل خروج
function logout() {
  localStorage.removeItem('discord_user');
  window.location.reload();
}

// عرض رسائل الحالة
function showStatus(message, type) {
  const status = document.getElementById('status');
  status.textContent = message;
  status.className = `status ${type}`;
  status.style.display = 'block';
  
  setTimeout(() => {
    status.style.display = 'none';
  }, 3000);
}
</script>
</body>
</html>
